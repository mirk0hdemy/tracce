<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <title>TRACCE</title>
  <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='white' d='M12 4a8 8 0 0 0-8 8c0 .33.02.65.07.96C2.95 13.64 2 14.69 2 16c0 2.21 4.48 4 10 4s10-1.79 10-4c0-1.31-.95-2.36-2.07-3.04.05-.31.07-.63.07-.96a8 8 0 0 0-8-8zm0 2a6 6 0 0 1 6 6c0 .27-.02.53-.06.79-1.13-.47-2.7-.79-4.44-.79-2.78 0-5.2.65-6.54 1.59A6.02 6.02 0 0 1 6 12a6 6 0 0 1 6-6zm0 6c3.89 0 7.01 1.16 7.74 2.31-.63.52-1.92 1.18-3.98 1.57a17.1 17.1 0 0 1-3.76.4c-2.21 0-4.19-.38-5.6-.99C6.63 12.97 9.05 12 12 12z'/%3E%3C/svg%3E" type="image/svg+xml">
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Google Material Symbols -->
  <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet" />

  <style>
    * {
      -webkit-tap-highlight-color: transparent;
      box-sizing: border-box;
    }

    body {
      background-color: black;
      color: white;
      font-family: 'Material Symbols Outlined', sans-serif;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      height: 100vh;
      margin: 0;
      gap: 2rem;
      touch-action: manipulation;
    }

    h1 {
      font-size: 2rem;
      letter-spacing: 0.15em;
      text-transform: uppercase;
      color: white;
      font-family: 'Material Symbols Outlined', sans-serif;
      margin: 0;
    }

    button {
      all: unset;
      display: flex;
      justify-content: center;
      align-items: center;
      width: 120px;
      height: 120px;
      border-radius: 50%;
      background: none;
      cursor: pointer;
      transition: transform 0.2s;
    }

    button:hover {
      transform: scale(1.05);
    }

    button svg {
      width: 60px;
      height: 60px;
      fill: white;
    }

    button:disabled svg {
      fill: gray;
    }

    @media (max-width: 768px) {
      h1 {
        font-size: 1.5rem;
      }

      button {
        width: 160px;
        height: 160px;
      }

      button svg {
        width: 80px;
        height: 80px;
      }
    }
  </style>
</head>
<body>

  <h1>TRACCE</h1>

  <button id="toggleBtn" disabled>
    <!-- Icona clessidra iniziale -->
    <svg id="icon" viewBox="0 0 24 24">
      <path d="M6 2v2h1v3c0 1.1.9 2 2 2h6c1.1 0 2-.9 2-2V4h1V2H6zm1 5V4h10v3c0 .55-.45 1-1 1H8c-.55 0-1-.45-1-1zm10 10v3H7v-3c0-.55.45-1 1-1h8c.55 0 1 .45 1 1zm1-2H6v2h12v-2z"/>
    </svg>
  </button>

  <audio id="myAudio" loop>
    <source src="assets/tracce-audio.mp3" type="audio/mpeg" />
    Il tuo browser non supporta l'audio.
  </audio>

  <script>
    const audio = document.getElementById('myAudio');
    const button = document.getElementById('toggleBtn');
    const icon = document.getElementById('icon');

    const playIcon = `<path d="M8 5v14l11-7z"/>`;
    const pauseIcon = `<path d="M6 19h4V5H6zm8-14v14h4V5h-4z"/>`;

    audio.addEventListener('loadedmetadata', () => {
      button.disabled = false;
      icon.innerHTML = playIcon;
    });

    button.addEventListener('click', () => {
      if (audio.paused) {
        const maxStart = Math.max(0, audio.duration - 1);
        audio.currentTime = Math.random() * maxStart;
        audio.play();
        icon.innerHTML = pauseIcon;
      } else {
        audio.pause();
        icon.innerHTML = playIcon;
      }
    });
  </script>
</body>
</html>
